{"version":3,"sources":["components/HOC/withAuthRedirect.jsx","redux/dialogs.reducer.js","components/Profile/MyPosts/Post/Post.module.css","components/Header/Header.module.css","components/Navbar/Navbar.module.css","reportWebVitals.js","components/Navbar/Navbar.jsx","api/api.js","redux/users.reducer.js","components/common/Preloader/Preloader.jsx","components/common/Paginator/Paginator.jsx","assets/images/ava.png","components/Users/User.jsx","components/Users/Users.jsx","redux/users.selectors.js","components/Users/UsersContainer.jsx","components/Profile/ProfileInfo/ProfileStatus.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","redux/profile.reducer.js","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx","components/Header/Header.jsx","redux/auth.reducer.js","components/Header/HeaderContainer.jsx","components/Login/Login.jsx","redux/app.reducer.js","redux/sidebar.reducer.js","redux/redux-store.js","App.js","components/HOC/withSuspense.jsx","index.js","components/common/Paginator/Paginator.module.css","components/Login/login.module.css","App.module.css","components/common/Preloader/Preloader.module.css","components/Profile/MyPosts/MyPosts.module.css"],"names":["mapStateToPropsAuth","state","auth","isAuth","withAuthRedirect","Component","RedirectComponent","this","props","to","React","connect","ADD_MESSAGE","addMessagePostActionCreator","postMessage","type","initialState","dialogs","name","id","messages","message","dialogsReducer","stateCopy","action","messagePost","push","module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Nav","className","s","nav","item","activeClassName","active","axiosInstance","axios","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","get","response","data","follow","userId","post","unfollow","delete","getProfileInfo","console","warn","profileAPI","getStatus","updateStatus","status","put","authAPI","email","password","rememberMe","FOLLOW","UNFOLLOW","SET_USERS","SET_TOTAL_USERS_COUNT","SET_CURRENT_PAGE","TOGGLE_FETCHING","TOGGLE_FOLLOWING","users","totalUsersCount","isFetching","isFollowingIds","followAccept","unfollowAccept","toggleFetch","toggleFollow","addUserId","followUnfollow","dispatch","APIMethod","ACMethod","a","resultCode","usersReducer","map","u","followed","pageNumber","filter","Preloader","preloader","spinner","Paginator","setCurrentPage","pageCount","Math","ceil","pageRangeDisplayed","disableInitialCallback","marginPagesDisplayed","initialPage","onPageChange","currentPageNumber","selected","previousLabel","nextLabel","breakLabel","disabledClassName","disabled","breakClassName","containerClassName","pagination","subContainerClassName","User","user","isFollowing","src","Avatar","alt","some","onClick","Users","getAllUsers","usersPage","getTotalUsersCount","getPageSize","getCurrentPage","getFetchingStatus","getFollowingIds","UsersContainer","bind","items","totalCount","ProfileStatus","editMode","activateEditMode","setState","deActivateEditMode","updateUserStatus","onChangeStatus","e","currentTarget","value","prevProps","prevState","onDoubleClick","autoFocus","onChange","onBlur","ProfileInfo","profile","photos","large","aboutMe","fullName","ADD_POST","SET_USER_PROFILE","SET_USER_STATUS","DELETE_POST","posts","postId","setUserStatus","profileReducer","newPost","newPostText","Post","schema","Yup","shape","required","MyPostForm","initialValues","validationSchema","onSubmit","values","resetForm","onAddPost","isSubmitting","errors","touched","inputError","as","component","MyPosts","log","postItems","p","i","addPost","MyPostsContainer","profilePage","addPostActionCreator","Profile","ProfileContainer","match","params","authorizedUserId","setUserInfo","getUserStatus","history","compose","withRouter","Header","header","login","logout","SET_DATA_USER","SET_ERROR_FORM","errorFormMessage","setDataAuthUser","payload","getAuth","authReducer","msg","HeaderContainer","LoginForm","setSubmitting","loginMe","setTimeout","handleSubmit","isValid","SET_INITIALIZATION","initialized","appReducer","sidebarReducer","reducers","combineReducers","dialogsPage","sidebarPage","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunk","DialogsContainer","lazy","App","setInit","app_wrapper","app_wrapper_content","path","render","fallback","AppContainer","promise","Promise","all","MainApp","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.483979ab.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nconst mapStateToPropsAuth = (state) => {\r\n  return {\r\n    auth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if(!this.props.auth) return <Redirect to={\"/login\"}/>\r\n\r\n      return (\r\n        <Component {...this.props} />\r\n      )\r\n    }\r\n  }\r\n\r\n  const RedirectComponentContainer = connect(mapStateToPropsAuth)(RedirectComponent)\r\n\r\n  return RedirectComponentContainer;\r\n}\r\n\r\n","const ADD_MESSAGE ='ADD-MESSAGE'\r\n\r\nexport const addMessagePostActionCreator = (postMessage) => ({type: ADD_MESSAGE, postMessage})\r\n\r\nconst initialState = {\r\n  dialogs: [\r\n    {name: \"Valera\", id: \"1\"},\r\n    {name: \"Jim\", id: \"2\"},\r\n    {name: \"Petr\", id: \"3\"}\r\n  ],\r\n  messages: [\r\n    {message: \"Hi\"},\r\n    {message: \"How are u ?\"},\r\n    {message: \"I am good, thx\"}\r\n  ]\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n  let stateCopy;\r\n\r\n  switch (action.type) {\r\n    case ADD_MESSAGE:\r\n      stateCopy = {...state}\r\n      const messagePost = {\r\n        message: action.postMessage\r\n      }\r\n      stateCopy.messages = [...state.messages]\r\n      stateCopy.messages.push(messagePost)\r\n\r\n      return stateCopy;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default dialogsReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__3v6tE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__15lKs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__22Yp6\",\"item\":\"Navbar_item__3IHH3\",\"active\":\"Navbar_active__1_Pbw\"};","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\r\nimport s from './Navbar.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\nconst Nav = () => {\r\n  return (\r\n    <nav className={s.nav}>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/profile/\" activeClassName={s.active}>Profile</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/dialogs\" activeClassName={s.active}>Messages</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/news\" activeClassName={s.active}>News</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/something\" activeClassName={s.active}>Something</NavLink>\r\n      </div>\r\n      <div className={s.item}>\r\n        <NavLink to=\"/users\" activeClassName={s.active}>Users</NavLink>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default Nav","import * as axios from \"axios\";\r\n\r\n// Настриваем instance\r\nconst axiosInstance = axios.create({\r\n  baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n  withCredentials: true,\r\n  headers: {\r\n    \"API-KEY\": \"82aca8cf-3aaf-42f1-9d35-3abc6d82797c\"\r\n  }\r\n})\r\n\r\n\r\n// USERS API\r\nexport const usersAPI = {\r\n  getUsers(currentPage, pageSize) {\r\n    return axiosInstance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n      .then(response => response.data)\r\n  },\r\n\r\n  follow(userId) {\r\n    return axiosInstance.post(`follow/${userId}`)\r\n  },\r\n\r\n  unfollow(userId) {\r\n    return axiosInstance.delete(`follow/${userId}`)\r\n  },\r\n\r\n  getProfileInfo(userId) {\r\n    console.warn('This method is deprecated, use Profile API getProfileInfo')\r\n    return profileAPI.getProfileInfo(userId)\r\n  }\r\n}\r\n\r\n// PROFILE API\r\nexport const profileAPI = {\r\n  getProfileInfo(userId) {\r\n    return axiosInstance.get(`profile/${userId}`).then(response => response.data)\r\n  },\r\n\r\n  getStatus(userId) {\r\n    return axiosInstance.get(`profile/status/${userId}`)\r\n  },\r\n\r\n  updateStatus(status) {\r\n    return axiosInstance.put(`profile/status`, {status: status}).then(response => response.data)\r\n  }\r\n}\r\n\r\n\r\n// AUTH API\r\nexport const authAPI = {\r\n  me() {\r\n    return axiosInstance.get(`auth/me`).then(response => response.data)\r\n  },\r\n  login(email, password, rememberMe = false) {\r\n    return axiosInstance.post(`auth/login`, {email, password, rememberMe}).then(response => response.data)\r\n  },\r\n  logout() {\r\n    return axiosInstance.delete(`auth/login`).then(response => response.data)\r\n  }\r\n}\r\n\r\n","import {usersAPI} from \"../api/api\";\r\n\r\nconst FOLLOW = 'users/FOLLOW'\r\nconst UNFOLLOW = 'users/UNFOLLOW'\r\nconst SET_USERS = 'users/SET_USERS'\r\nconst SET_TOTAL_USERS_COUNT = 'users/SET_TOTAL_USERS_COUNT'\r\nconst SET_CURRENT_PAGE = 'users/SET_CURRENT_PAGE'\r\nconst TOGGLE_FETCHING = 'users/TOGGLE_FETCHING'\r\nconst TOGGLE_FOLLOWING = 'users/TOGGLE_FOLLOWING'\r\n\r\n\r\nconst initialState = {\r\n  users: [],\r\n  totalUsersCount: 0,\r\n  pageSize: 5,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  isFollowingIds: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map( (u) => { // Перебираем массив юзеров\r\n          if(u.id === action.userId) { // если юзер по которому тыкнули равен одному из юзеров которых перебираем\r\n            return {...u, followed: true} // то меняем его значение followed\r\n          }\r\n          return u\r\n        })\r\n      }\r\n\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: state.users.map( (u) => {\r\n          if(u.id === action.userId) {\r\n            return {...u, followed: false}\r\n          }\r\n          return u\r\n        })\r\n      }\r\n\r\n    case SET_USERS:\r\n      return {...state, users: [...action.users]}\r\n\r\n    case SET_TOTAL_USERS_COUNT:\r\n      return {...state, totalUsersCount: action.totalUsersCount}\r\n\r\n    case SET_CURRENT_PAGE:\r\n      return {...state, currentPage: action.pageNumber}\r\n\r\n    case TOGGLE_FETCHING:\r\n      return {...state, isFetching: action.isFetching}\r\n\r\n    case TOGGLE_FOLLOWING:\r\n      return {...state,\r\n        isFollowingIds: action.addUserId ? [...state.isFollowingIds, action.userId] : state.isFollowingIds.filter(id => id !== action.userId) // Если подписываемся, то он добавляет в массив айдишник, если нет, удаляет\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const followAccept = (userId) => ({type: FOLLOW, userId})\r\nexport const unfollowAccept = (userId) => ({type: UNFOLLOW, userId})\r\nexport const setUsers = (users) => ({type: SET_USERS, users})\r\nexport const setTotalUsersCount = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, totalUsersCount})\r\nexport const setCurrentPage = (pageNumber) => ({type: SET_CURRENT_PAGE, pageNumber})\r\nexport const toggleFetch = (isFetching) => ({type: TOGGLE_FETCHING, isFetching})\r\nexport const toggleFollow = (addUserId, userId) => ({type: TOGGLE_FOLLOWING, addUserId, userId})\r\n\r\n\r\n// THUNKS CREATORS\r\nexport const getUsers = (currentPage, pageSize) => async (dispatch) => {\r\n  dispatch(toggleFetch(true))\r\n\r\n  let data = await usersAPI.getUsers(currentPage, pageSize)\r\n  dispatch(setCurrentPage(currentPage))\r\n  dispatch(toggleFetch(false))\r\n  dispatch(setUsers(data.items))\r\n  dispatch(setTotalUsersCount(data.totalCount))\r\n}\r\n\r\n// Вынесли дублирующий код в отдельную функцию\r\nconst followUnfollow = async (dispatch, userId, APIMethod, ACMethod) => {\r\n  dispatch(toggleFollow(true, userId))\r\n\r\n  let response = await APIMethod(userId)\r\n  if (response.data.resultCode === 0) {\r\n    dispatch(ACMethod(userId))\r\n  }\r\n  dispatch(toggleFollow(false, userId))\r\n}\r\n\r\nexport const unfollow = (userId) => async (dispatch) => {\r\n  let APIMethod = usersAPI.unfollow.bind(usersAPI)\r\n  let ACMethod = unfollowAccept\r\n\r\n  await followUnfollow(dispatch, userId, APIMethod, ACMethod);\r\n}\r\n\r\nexport const follow = (userId) => async (dispatch) => {\r\n  let APIMethod = usersAPI.follow.bind(usersAPI)\r\n  let ACMethod = followAccept\r\n\r\n  await followUnfollow(dispatch, userId, APIMethod, ACMethod);\r\n}\r\n\r\nexport default usersReducer;","import React from \"react\";\r\nimport s from \"./Preloader.module.css\";\r\n\r\nconst Preloader = (props) => {\r\n  return (\r\n    <div className={s.preloader}>\r\n      <div className={s.spinner}></div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Preloader;","import React from \"react\"\r\nimport s from \"./Paginator.module.css\"\r\nimport ReactPaginate from \"react-paginate\";\r\n\r\nconst Paginator = ({totalUsersCount, pageSize, currentPage, setCurrentPage}) => {\r\n  let pageCount = Math.ceil(totalUsersCount / pageSize)\r\n\r\n  const handlePageClick = (data) => {\r\n    let currentPageNumber = data.selected + 1\r\n    setCurrentPage(currentPageNumber)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <ReactPaginate\r\n        pageRangeDisplayed={2}\r\n        disableInitialCallback={true}\r\n        pageCount={pageCount}\r\n        marginPagesDisplayed={1}\r\n        initialPage={currentPage - 1 || 0}\r\n        onPageChange={handlePageClick}\r\n        previousLabel={'назад'}\r\n        nextLabel={'вперед'}\r\n        breakLabel={'...'}\r\n        disabledClassName={s.disabled}\r\n        breakClassName={'break-me'}\r\n        containerClassName={s.pagination}\r\n        subContainerClassName={'pages pagination'}\r\n        activeClassName={s.active}\r\n      />\r\n\r\n    </>\r\n\r\n  )\r\n}\r\n\r\nexport default Paginator;\r\n","export default \"data:image/png;base64,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\"","import React from \"react\"\r\nimport Avatar from \"../../assets/images/ava.png\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\n\r\nconst User = ({user, isFollowing, follow, unfollow}) => {\r\n  return (\r\n    <div>\r\n      <div>\r\n        <NavLink to={'/profile/' + user.id}>\r\n          <img src={Avatar} alt=\"avatar\"/>\r\n        </NavLink>\r\n      </div>\r\n      <div>{user.name}</div>\r\n      <div>{user.message}</div>\r\n      <div>Город</div>\r\n      <div>Страна</div>\r\n      <div>\r\n        {user.followed ?\r\n          <button disabled={isFollowing.some((id) => id === user.id)} onClick={() => {unfollow(user.id)\r\n          }\r\n          }\r\n\r\n          >Отписаться</button> :\r\n          <button disabled={isFollowing.some((id) => id === user.id)} onClick={() => {follow(user.id)\r\n          }\r\n          }\r\n\r\n          >Подписаться</button>}\r\n      </div>\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default User;\r\n","import React from \"react\"\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\nimport Paginator from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\nconst Users = (props) => {\r\n\r\n  if(props.isFetching) {\r\n    return <Preloader />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {!props.isFetching &&\r\n        <div>\r\n          <Paginator totalUsersCount={props.totalUsersCount} pageSize={props.pageSize} currentPage={props.currentPage} setCurrentPage={props.setCurrentPage} />\r\n          {\r\n            props.users.map(u => <User key={u.id} user={u} follow={props.follow} unfollow={props.unfollow} isFollowing={props.isFollowing} />)\r\n          }\r\n        </div>\r\n      }\r\n    </>\r\n\r\n  )\r\n};\r\n\r\nexport default Users;\r\n","import {createSelector} from \"reselect\";\r\n\r\nexport const getAllUsers = (state) => {\r\n  return state.usersPage.users\r\n}\r\n\r\n/*\r\n  Reselector - первый параметр, это обычный селектор, который требует не дорогую операцию, их может быть несколько\r\n  в скобочки users - мы ставим, то над чем будем работать, тот кусочек стейта над которым будет делать дорогую операцию\r\n */\r\n// export const getAllUsersReselect = createSelector(getAllUsers, (users) => {\r\n//   return users.filter(u => u);\r\n// });\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n  return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n  return state.usersPage.pageSize\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n  return state.usersPage.currentPage\r\n}\r\n\r\nexport const getFetchingStatus = (state) => {\r\n  return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingIds = (state) => {\r\n  return state.usersPage.isFollowingIds\r\n}","import React from 'react'\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n  follow, getUsers,\r\n  toggleFollow,\r\n  unfollow\r\n} from \"../../redux/users.reducer\";\r\nimport Users from \"./Users\";\r\nimport {\r\n  getAllUsers,\r\n  getCurrentPage,\r\n  getFetchingStatus, getFollowingIds,\r\n  getPageSize,\r\n  getTotalUsersCount\r\n} from \"../../redux/users.selectors\";\r\n\r\n\r\n// деструктуризация\r\nclass UsersContainer extends React.Component {\r\n  constructor(props) { // Если внутри только super(props) - то есть вызов родительского конструктора, то конструктор можно не писать\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() { // компонент вмонтирован. Подходит для side effects (ajax, dom request, settimeout etc...)\r\n    this.props.getUsers(this.props.currentPage, this.props.pageSize)\r\n  }\r\n\r\n  setCurrentPage = (pageNumber) => {\r\n    this.props.getUsers(pageNumber, this.props.pageSize)\r\n  }\r\n\r\n  render() {\r\n\r\n    return <Users\r\n      totalUsersCount = {this.props.totalUsersCount}\r\n      pageSize = {this.props.pageSize}\r\n      setCurrentPage = {this.setCurrentPage}\r\n      currentPage = {this.props.currentPage}\r\n      users = {this.props.users}\r\n      unfollow = {this.props.unfollow}\r\n      follow = {this.props.follow}\r\n      isFetching = {this.props.isFetching}\r\n      isFollowing = {this.props.isFollowing}\r\n      toggleFollow = {this.props.toggleFollow}\r\n            />\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => { // Передаем все что свзяано со стейтом\r\n  return {\r\n    users: getAllUsers(state),\r\n    totalUsersCount: getTotalUsersCount(state),\r\n    pageSize: getPageSize(state),\r\n    currentPage: getCurrentPage(state),\r\n    isFetching: getFetchingStatus(state),\r\n    isFollowing: getFollowingIds(state)\r\n\r\n  }\r\n}\r\n\r\n// Раньше в connect кидали вот эту штуку, потом её сократили по синтаксису\r\n// const mapDispatchToProps = (dispatch) => { // Передаем диспатчи\r\n//   return {\r\n//     follow: (userId) => { dispatch(follow(userId)) },\r\n//     unfollow: (userId) => { dispatch(unfollow(userId)) },\r\n//     setUsers: (users) => { dispatch(setUsers(users))},\r\n//     setTotalUsersCount: (totalUsersCount) => { dispatch(setTotalUsersCount(totalUsersCount))},\r\n//     setCurrentPage: (pageNumber) => { dispatch(setCurrentPage(pageNumber))},\r\n//     toggleFetch: (isFetching) => { dispatch(toggleFetch(isFetching))}\r\n//   }\r\n// }\r\n\r\n\r\nexport default connect(mapStateToProps, {\r\n  follow,\r\n  unfollow,\r\n  toggleFollow,\r\n  getUsers\r\n})(UsersContainer)","import React from \"react\";\r\n\r\n\r\nclass ProfileStatus extends React.Component{\r\n\r\n  state = {\r\n    editMode: false,\r\n    status: this.props.status\r\n  }\r\n\r\n  activateEditMode = () => {\r\n    this.setState(\r\n      {\r\n        editMode: true\r\n      }\r\n    )\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(prevProps.status !== this.props.status) {\r\n      this.setState({\r\n        status: this.props.status\r\n      })\r\n    }\r\n  }\r\n\r\n  deActivateEditMode= () => {\r\n    this.setState(\r\n      {\r\n        editMode: false\r\n      }\r\n    )\r\n    this.props.updateUserStatus(this.state.status)\r\n  }\r\n\r\n  onChangeStatus = (e) => {\r\n    this.setState(\r\n      {\r\n        status: e.currentTarget.value\r\n      }\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {!this.state.editMode &&\r\n          <div>\r\n            <span onDoubleClick={ this.activateEditMode }>{this.props.status || 'Не определен'}</span>\r\n          </div>\r\n        }\r\n        {this.state.editMode &&\r\n          <div>\r\n            <input autoFocus={true} onChange={this.onChangeStatus} type=\"text\" value={this.state.status} onBlur={this.deActivateEditMode}/>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProfileStatus","import React from \"react\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport Avatar from \"../../../assets/images/ava.png\"\r\nimport ProfileStatus from \"./ProfileStatus\";\r\n\r\nconst ProfileInfo = (props) => {\r\n  if(!props.profile) {\r\n    return (\r\n      <Preloader />\r\n    )\r\n  }\r\n  return (\r\n    <div className=\"content\">\r\n      <div className=\"content-img\">\r\n\r\n        <img src={props.profile.photos.large || Avatar} alt=\"avatar\"/>\r\n      </div>\r\n      <div>Обо мне: {props.profile.aboutMe || 'Увы, пока здесь пусто'}</div>\r\n      <div>Полное имя: {props.profile.fullName}</div>\r\n      <div>Статус: <ProfileStatus updateUserStatus={props.updateUserStatus} status={props.status} /> </div>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProfileInfo","import {profileAPI, usersAPI} from \"../api/api\";\r\n\r\nconst ADD_POST = 'profile/ADD-POST'\r\nconst SET_USER_PROFILE = 'profile/SET_USER_PROFILE'\r\nconst SET_USER_STATUS = 'profile/SET_USER_STATUS'\r\nconst DELETE_POST = 'profile/DELETE_POST'\r\n\r\nconst initialState = {\r\n  posts: [\r\n    {postId: 1, src: 'https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg', message: 'Описание 1'},\r\n    {postId: 2, src: 'https://klike.net/uploads/posts/2019-03/1551511801_1.jpg', message: 'Описание 2'},\r\n  ],\r\n  profile: null,\r\n  status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n  let stateCopy; // объявляем копию объекта, по нужде копируем нужные элементы (которые будут изменяться)\r\n\r\n  switch (action.type) {\r\n    case ADD_POST: {\r\n      stateCopy = {...state}\r\n      const newPost = {\r\n        src: 'https://klike.net/uploads/posts/2019-03/1551511801_1.jpg',\r\n        message: action.postMessage\r\n      }\r\n\r\n      stateCopy.posts = [...state.posts]\r\n      stateCopy.posts.push(newPost)\r\n      stateCopy.newPostText = ''\r\n      return stateCopy\r\n    }\r\n\r\n\r\n    case SET_USER_PROFILE:\r\n      return {\r\n        ...state,\r\n        profile: action.profile\r\n      }\r\n\r\n    case SET_USER_STATUS:\r\n      return {\r\n        ...state,\r\n        status: action.status\r\n      }\r\n\r\n    case DELETE_POST:\r\n      return {\r\n        ...state,\r\n        posts: state.posts.filter((post) => post.postId != action.postId)\r\n      }\r\n\r\n    default:\r\n      return state\r\n\r\n  }\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const addPostActionCreator = (postMessage) => ({type: ADD_POST, postMessage})\r\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nexport const setUserStatus = (status) => ({type: SET_USER_STATUS, status})\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\n\r\n// THUNK CREATORS\r\nexport const setUserInfo = (userId) => async (dispatch) => {\r\n  let data = await usersAPI.getProfileInfo(userId)\r\n  dispatch(setUserProfile(data))\r\n\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n  let data = await profileAPI.getStatus(userId)\r\n  dispatch(setUserStatus(data.data))\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n  let data = await profileAPI.updateStatus(status)\r\n  if(data.resultCode === 0) {\r\n    dispatch(setUserStatus(status))\r\n  }\r\n}\r\n\r\nexport default profileReducer;","import React from \"react\";\r\nimport s from \"./Post.module.css\";\r\n\r\nconst Post = (props) => {\r\n  return (\r\n    <div className={s.item}>\r\n\r\n      <img src={props.src} alt=\"avatar\"/>\r\n      {props.message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Post;","import React from \"react\";\r\nimport Post from \"./Post/Post\";\r\nimport s from \"./MyPosts.module.css\"\r\nimport {ErrorMessage, Field, Form, Formik} from \"formik\";\r\nimport * as Yup from \"yup\";\r\n\r\n\r\nconst schema = Yup.object().shape({\r\n  postMessage: Yup.string().required('Поле не должно быть пустым')\r\n})\r\n\r\nconst MyPostForm = (props) => {\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{ postMessage: ''}}\r\n\r\n        validationSchema={schema}\r\n\r\n        onSubmit={(values, { resetForm }) => {\r\n          props.onAddPost(values.postMessage)\r\n          resetForm()\r\n        }}\r\n      >\r\n        {({ isSubmitting, errors, touched }) => (\r\n          <Form>\r\n            <Field type=\"text\" className={errors.postMessage && touched.postMessage ? s.inputError : '' } name=\"postMessage\" as=\"textarea\" />\r\n            <ErrorMessage name=\"postMessage\" component=\"div\" />\r\n            <button type=\"submit\" disabled={isSubmitting}>\r\n              Добавить пост\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n\r\n}\r\n\r\n\r\nconst MyPosts = (props) => {\r\n  console.log('render');\r\n\r\n  const postItems = props.posts\r\n    .map((p, i) => <Post key={i} src={p.src} message={p.message} />)\r\n\r\n  const onAddPost = (postMessage) => {\r\n    props.addPost(postMessage)\r\n  }\r\n\r\n  return (\r\n      <div className={s.posts}>\r\n        <span>Посты</span>\r\n\r\n        <div>\r\n          <MyPostForm onAddPost={onAddPost} />\r\n        </div>\r\n\r\n        {postItems}\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default MyPosts;","import React from \"react\";\r\nimport {addPostActionCreator} from \"../../../redux/profile.reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { // Компонент перерисуется если поменяются значения строк ниже\r\n    posts: state.profilePage.posts, // посты\r\n    newPostText: state.profilePage.newPostText // текст в посте\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addPost: (postMessage) => dispatch(addPostActionCreator(postMessage)),\r\n  }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)\r\n\r\n\r\n\r\nexport default MyPostsContainer;","import React from \"react\";\r\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\n\r\nconst Profile = (props) => {\r\n  return (\r\n    <div>\r\n      <ProfileInfo profile={props.profile} status={props.status} updateUserStatus={props.updateUserStatus}/>\r\n\r\n      <MyPostsContainer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile","import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {withRouter} from \"react-router\";\r\nimport {getUserStatus, setUserInfo, updateUserStatus} from \"../../redux/profile.reducer\";\r\nimport {withAuthRedirect} from \"../HOC/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\n\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n  componentDidMount() {\r\n    let userId = this.props.match.params.userId || this.props.authorizedUserId\r\n    this.props.setUserInfo(userId)\r\n    this.props.getUserStatus(userId)\r\n\r\n    if(!userId) {\r\n      this.props.history.push(\"/login\")\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Profile {...this.props} />\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authorizedUserId: state.auth.userId\r\n  }\r\n}\r\n\r\n\r\nexport default compose(\r\n  connect(mapStateToProps, {setUserInfo, getUserStatus, updateUserStatus}), // обернули в Connect\r\n  withAuthRedirect, // обернули в Redirect Container\r\n  withRouter // обернули в Router Container\r\n)(ProfileContainer)","import React from \"react\";\r\nimport s from './Header.module.css'\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Header = (props) => {\r\n  return (\r\n    <header className={s.header}>\r\n      <div><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Instagram_logo_2016.svg/768px-Instagram_logo_2016.svg.png\" alt=\"logo\"/></div>\r\n      <div>{props.isAuth ? <div>Привет, {props.login} <button onClick={props.logout}>logout</button></div> : <div><NavLink to=\"/login\">Login</NavLink></div>}</div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import {authAPI} from \"../api/api\";\r\n\r\nconst SET_DATA_USER = 'auth/SET_DATA_USER' // reduxducks\r\nconst SET_ERROR_FORM = 'auth/SET_ERROR_FORM' // reduxducks\r\n\r\n\r\nconst initialState = {\r\n  userId: null,\r\n  login: null,\r\n  email: null,\r\n  isAuth: false,\r\n  errorFormMessage: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case SET_DATA_USER:\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      }\r\n\r\n    case SET_ERROR_FORM:\r\n      return {\r\n        ...state,\r\n        errorFormMessage: action.msg\r\n      }\r\n\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const setDataAuthUser = (userId, login, email, isAuth) => ({type: SET_DATA_USER, payload: {userId, login, email, isAuth} })\r\nexport const setErrorForm = (msg) => ({type: SET_ERROR_FORM, msg})\r\n\r\n// THUNKS CREATORS\r\nexport const getAuth = () => async (dispatch) => {\r\n  let data = await authAPI.me();\r\n    if(data.resultCode === 0) {\r\n      let {id, login, email} = data.data\r\n      dispatch(setDataAuthUser(id, login, email, true))\r\n    }\r\n}\r\nexport const loginMe = (email, password, rememberMe) => async (dispatch) => {\r\n  let data = await authAPI.login(email, password, rememberMe)\r\n\r\n  if (data.resultCode === 0) {\r\n    dispatch(getAuth())\r\n  } else {\r\n    dispatch(setErrorForm(data.messages[0]))\r\n  }\r\n}\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  let data = await authAPI.logout()\r\n  if (data.resultCode === 0) {\r\n    dispatch(setDataAuthUser(null, null, null, false))\r\n  }\r\n}\r\n\r\nexport default authReducer;","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../redux/auth.reducer\";\r\n\r\nclass HeaderContainer extends React.Component {\r\n\r\n  render () {\r\n    return <Header {...this.props} />\r\n  }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    login: state.auth.login,\r\n    isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, {logout})(HeaderContainer)","import React from 'react';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport s from './login.module.css'\r\nimport {connect} from \"react-redux\";\r\nimport {loginMe} from \"../../redux/auth.reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nconst schema = Yup.object().shape({\r\n  email: Yup.string().email('Введите верный mail').required('Поле не должно быть пустым'),\r\n  password: Yup.string().required('Поле пароль не заполнено')\r\n})\r\n\r\n\r\n// деструктуризация\r\nconst LoginForm = (props) => {\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{ email: '', password: '', rememberMe: false}}\r\n\r\n        validationSchema={schema}\r\n\r\n        onSubmit={(values, { setSubmitting, isSubmitting }) => {\r\n          props.loginMe(values.email, values.password, values.rememberMe)\r\n          setTimeout(() => {setSubmitting(false)}, 3000)\r\n        }}\r\n      >\r\n        {({ isSubmitting, handleSubmit, errors, touched, isValid  }) => (\r\n          <Form onSubmit={handleSubmit}>\r\n            <Field type=\"email\" name=\"email\" className={errors.email && touched.email ? s.inputError : '' } />\r\n            <ErrorMessage name=\"email\" component=\"div\" />\r\n            <Field type=\"password\" name=\"password\" className={errors.password && touched.password ? s.inputError : '' }/>\r\n            <ErrorMessage name=\"password\" component=\"div\" />\r\n            <label>\r\n              <Field type=\"checkbox\" name=\"rememberMe\"/>\r\n              <span>Запомнить меня</span>\r\n            </label>\r\n\r\n            {props.errorFormMessage && isSubmitting &&\r\n              <div className={s.inputError}>{props.errorFormMessage}</div>\r\n            }\r\n            <button disabled={isSubmitting || !isValid}>\r\n              Отправить\r\n            </button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst Login = (props) => {\r\n  if(props.isAuth) {\r\n    return (\r\n      <Redirect to={\"/profile\"}/>\r\n    )\r\n  }\r\n\r\n  \r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <LoginForm loginMe={props.loginMe} errorFormMessage={props.errorFormMessage} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    errorFormMessage: state.auth.errorFormMessage,\r\n    isAuth: state.auth.isAuth\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, {loginMe})(Login);","import {getAuth} from \"./auth.reducer\";\r\n\r\nconst SET_INITIALIZATION = 'SET_INITIALIZATION'\r\n\r\nconst initialState = {\r\n  initialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case SET_INITIALIZATION:\r\n      return {\r\n        ...state,\r\n        initialized: true\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ACTION CREATORS\r\nexport const setInitialization = () => ({type: SET_INITIALIZATION})\r\n\r\n// THUNKS CREATORS\r\nexport const setInit = () => (dispatch) => {\r\n  let promise = dispatch(getAuth());\r\n\r\n  Promise.all([promise]).then(() => {\r\n    dispatch(setInitialization())\r\n  })\r\n}\r\n\r\n\r\nexport default appReducer;","\r\nconst initialState = {}\r\n\r\nconst sidebarReducer = (state = initialState, action) => {\r\n  return state\r\n}\r\n\r\nexport default sidebarReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport profileReducer from \"./profile.reducer\";\r\nimport dialogsReducer from \"./dialogs.reducer\";\r\nimport sidebarReducer from \"./sidebar.reducer\";\r\nimport usersReducer from \"./users.reducer\";\r\nimport authReducer from \"./auth.reducer\";\r\nimport thunk from \"redux-thunk\";\r\nimport appReducer from \"./app.reducer\";\r\n\r\n\r\nlet reducers = combineReducers({\r\n  profilePage: profileReducer,\r\n  dialogsPage: dialogsReducer,\r\n  sidebarPage: sidebarReducer,\r\n  usersPage: usersReducer,\r\n  auth: authReducer,\r\n  app: appReducer\r\n})\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(\r\n  applyMiddleware(thunk) // Добавили опцию санок в случае нужды, то есть теперь принимает не только экшены\r\n));\r\n\r\n\r\nexport default store;","import React, {Suspense} from \"react\";\nimport s from \"./App.module.css\";\nimport Nav from \"./components/Navbar/Navbar\";\nimport {BrowserRouter, HashRouter, Route} from \"react-router-dom\";\n\nimport UsersContainer from \"./components/Users/UsersContainer\";\nimport ProfileContainer from \"./components/Profile/ProfileContainer\";\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\nimport Login from \"./components/Login/Login\";\nimport {connect, Provider} from \"react-redux\";\nimport {setInit} from \"./redux/app.reducer\";\nimport Preloader from \"./components/common/Preloader/Preloader\";\nimport store from \"./redux/redux-store\";\nimport {withSuspense} from \"./components/HOC/withSuspense\";\n\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\")); // Lazy load\n\n// в Route path =  :названиеПеременной   ? - необязательность параметра\n\n\n\nclass App extends React.Component {\n\n  componentDidMount() {\n    this.props.setInit()\n  }\n\n  render () {\n\n    if(!this.props.initialized) {\n      return (\n        <Preloader />\n      )\n    }\n\n    return (\n      <div className={s.app_wrapper}>\n        <HeaderContainer />\n        <Nav />\n        <div className={s.app_wrapper_content}>\n          <Route path=\"/dialogs\" render={() => withSuspense(DialogsContainer)}/>\n          <Route path=\"/profile/:userId?\" render={() => <ProfileContainer />} />\n          <Route path=\"/users\" render={() => <UsersContainer />} />\n          <Route path=\"/login\" render={() => <Login />} />\n        </div>\n      </div>\n\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    initialized: state.app.initialized\n  }\n}\n\nconst AppContainer = connect(mapStateToProps, {setInit})(App);\n\nconst MainApp = (props) => {\n  return (\n    <HashRouter>\n      <Provider store={store}>\n        <AppContainer />\n      </Provider>\n    </HashRouter>\n  )\n}\n\nexport default MainApp;\n\n","import React, {Suspense} from \"react\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\n\r\n\r\nexport const withSuspense = (Component) => {\r\n  return <Suspense fallback={<Preloader />}>\r\n    <Component />\r\n  </Suspense>\r\n}\r\n\r\n\r\n","import React from 'react';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport ReactDOM from \"react-dom\";\nimport MainApp from \"./App\";\nimport store from \"./redux/redux-store\";\n\n\n\n// Отрисовали дерево, потом оно само будет отрисовываться при изменении пропрсов\nReactDOM.render(\n  <MainApp />, document.getElementById('root')\n);\n\nwindow.store = store\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <BrowserRouter>\n//       <Provider store={store}>\n//         <App />\n//       </Provider>\n//     </BrowserRouter>\n//   </React.StrictMode>, document.getElementById('root')\n// );\n\n\n\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentPage\":\"Paginator_currentPage__iKiTQ\",\"pagination\":\"Paginator_pagination__1tl-9\",\"disabled\":\"Paginator_disabled__3Mpqu\",\"active\":\"Paginator_active__2E-xB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputError\":\"login_inputError__3-GYZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_wrapper\":\"App_app_wrapper__2V7HU\",\"app_wrapper_content\":\"App_app_wrapper_content__o8yPs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader\":\"Preloader_preloader__UUpwR\",\"spinner\":\"Preloader_spinner__2ZoYd\",\"spin\":\"Preloader_spin__2j65X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"posts\":\"MyPosts_posts__vCaZ6\",\"inputError\":\"MyPosts_inputError__q2gmo\"};"],"sourceRoot":""}